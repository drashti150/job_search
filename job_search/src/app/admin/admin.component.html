<div *ngIf="!isLoggedIn">

  <form [formGroup]="loginForm" (ngSubmit)="login()">
    <div class="login">

      <h2>Login</h2>

      <div>
        <label for="username">Username : </label>
        <input type="username" formControlName="username">
      </div>

      <div>
        <label for="password">Password : </label>
        <input type="password" formControlName="password">
      </div>

      <button type="submit">Login</button>
    </div>

  </form>
</div>


<div *ngIf="isLoggedIn">

  <h1>Welcome to Admin Panel</h1>

  <div class="container">

    <div class="left-panel">

      <h1>Admin Panel</h1>

      <div class="recruiter" *ngIf="isLoggedIn">
        <h2 (click)="toggleRecruiters()">Recruiter List</h2>
      </div>

      <div class="category" *ngIf="isLoggedIn">
        <h2 (click)="toggleCategories()">Category List</h2>
      </div>

      <div class="job" *ngIf="isLoggedIn">
        <h2 (click)="toggleJobList()">Job Postings</h2>
      </div>
    </div>



    <!-- right panel -->
    <div class="right-panel">

      <div class="recruiter_box">

        <div class="recruiter_box" *ngIf="showRecruitersPanel">

          <div>
            <label for="recruiterName">Recruiter Name:</label>
            <select id="recruiterName" [(ngModel)]="selectedRecruiterName">
              <option *ngFor="let recruiter of recruiters" [value]="recruiter.name">{{ recruiter.name }}</option>
            </select>
          </div>

          <div>
            <label for="recruiterCategory">Recruiter Category:</label>
            <select id="recruiterCategory" [(ngModel)]="selectedRecruiterCategory">
              <option *ngFor="let category of recruiterCategories" [value]="recruiter.category">{{recruiter.category }}
              </option>
            </select>
          </div>
          <!-- 
          <div>
            <label for="category">Category:</label>
            <select id="category" [(ngModel)]="selectedRecruiterCategorty">
              <option *ngFor="let category of categories" [value]="this.recruiter.category">{{this.recruiter.category }}</option>
            </select>
          </div> -->

          <div class="recruiter">

            <h1>Recruiter List</h1>

            <h2>Add Recruiter List</h2>

            <input type="text" placeholder="Enter recruiter name" [(ngModel)]="recruiterName">
            <input type="text" placeholder="Enter recruiter email" [(ngModel)]="recruiterEmail">
            <input type="text" placeholder="Enter recruiter category" [(ngModel)]="recruiterCategory">
            <button (click)="addRecruiter()" class="add-button">ADD</button>

            <h2>Recruiters List</h2>

            <div *ngIf="recruiters.length === 0">
              <p>No recruiters found.</p>
            </div>

          </div>

          <!-- show recruter list -->
          <div class="recruiter-list">

            <div *ngFor="let recruiter of recruiters; let i = index" class="recruiter-item">
              <div class="recruiter-details">

                <input type="text" [(ngModel)]="recruiter.name" placeholder="Enter name"
                  [disabled]="editingIndex !== i">

                <input type="email" [(ngModel)]="recruiter.email" placeholder="Enter email"
                  [disabled]="editingIndex !== i">

                <input type="text" [(ngModel)]="recruiter.category" placeholder="Enter category"
                  [disabled]="editingIndex !== i">

                <button (click)="updateRecruiter()" *ngIf="editingIndex === i">Update</button>
                <button (click)="editRecruiter(i)" *ngIf="editingIndex !== i">Edit</button>
                <button (click)="deleteRecruiter(i)">Delete</button>

              </div>
            </div>
          </div>
        </div>
      </div>



      <!-- category -->

      <!-- <div *ngIf="isLoggedIn">
        <div *ngIf="showCategoriesPanel">
           Display recruiters grouped by category -->
      <!-- <h2>Recruiters by Category</h2>
          <ul>
            <li *ngFor="let category of categories">
              <h3>{{ category }}</h3>
              <ul>
                <li *ngFor="let recruiter of getRecruitersByCategory(category)">
                  {{ recruiter.name }} - {{ recruiter.email }}
                </li>
              </ul>
            </li>
          </ul>
        </div>
      </div> -->
      <div class="recruiter_box" *ngIf="showCategoriesPanel">

        <div class="categories">

          <h1>Category wise Job List</h1>

          <!-- <h2>Add Category</h2> -->

          <div class="category-list">

            <!-- <input type="text" [(ngModel)]="category" placeholder="Enter category"> -->
            <!-- <button (click)="addCategory()" class="add-button">ADD</button> -->

            <h2 class="section-header">All categories</h2>

            <select id="category-list" (change)="filterByCategory()">
              <option value="all">All Categories</option>
              <option *ngFor="let category of categories" [value]="category"> {{ category }}</option>
            </select>

          </div>

        </div>

      </div>

      <div class="recruiter_box" *ngIf="showJobList">

        <h2>Job List</h2>

        <ul class="job-list">

          <li *ngFor="let job of jobPosts; let i = index">

            <div class="job-container">

              <h2>Title : : {{job.title}}</h2>
              <p>Category : {{job.category}}</p>
              <p>Country : {{job.country}}</p>
              <p>Company : {{job.company}}</p>
              <p>Location : {{job.location}}</p>
              <p>Description : {{job.description}}</p>

              <button (click)="deleteJob(i)">Delete</button>
            </div>

          </li>
        </ul>
      </div>
    </div>
